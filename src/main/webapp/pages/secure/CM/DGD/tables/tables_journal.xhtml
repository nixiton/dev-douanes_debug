<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

<h:head></h:head>

<div class="body collapse in table-responsive">


	<h:form>
		<!--p:dataTable   var="c" value="#{suivieditionBean.listOperationByDirectionByYearByDateAsc}"
                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                 paginator="true" rows="10" style="margin-bottom:20px"  
                 rowStyleClass="#{c['class'].simpleName ne 'OpEntree' and c['class'].simpleName ne 'OpSortie' ? 'ui-helper-hidden' : '' }"-->


		<p:dataTable var="c" value="#{suivieditionBean.listOpESForJournal}"
			paginatorTemplate="{CurrentPageReport}  {PreviousPageLink} {PageLinks} {NextPageLink} {Exporters}"
			paginator="true" rows="10" style="margin-bottom:20px"
			rowStyleClass="#{c['class'].simpleName ne 'OpEntree' and c['class'].simpleName ne 'OpSortie' ? 'ui-helper-hidden' : '' }"
			sortBy="#{c.id}"
			widgetVar="JournalTable"
			id="journaltable"
			>
			<f:facet name="{Exporters}">
            <h:commandLink>
                <i class="fa fa-table">  </i> Excel
                <p:dataExporter type="xls" target="journaltable" fileName="journaloperation" />
            </h:commandLink>
 			<span>   </span>
            <h:commandLink>
            	<i class="fa fa-file">  </i> PDF
                <p:dataExporter type="pdf" target="journaltable" fileName="journaloperation"/>
            </h:commandLink>
        </f:facet>
			<p:columnGroup type="header">
			<p:row>
				<p:column colspan="7" headerText="Renseignement" />
                <p:column colspan="2" headerText="Entrée" />
                <p:column colspan="2" headerText="Sortie"></p:column>
			</p:row>
			<p:row>
				<p:column headerText="ID"/>
				<p:column headerText="Numéro d'ordre des pièces justificatives"/>
				<p:column headerText="Date des entrées et des sorties"/>
				<p:column headerText="Origine des entrées et désignation des sorties"/>
				<p:column headerText="Désignation des matières et objets"/>
				<p:column headerText="Espèce des unités"/>
				<p:column headerText="Prix de l'unité"/>
				<p:column headerText="Quanitité"/>
				<p:column headerText="Valeur"/>
				<p:column headerText="Quanitité"/>
				<p:column headerText="Valeur"/>
			</p:row>
				
			</p:columnGroup>
			<p:column headerText="ID"> 
			<h:outputText value="#{c.id}" />
			
			
			</p:column>

			<p:column headerText="Numéro d'ordre des pièces justificatives">

				<p:panel>
            	<h:outputText value="#{c.numoperation}" />
            </p:panel>

			</p:column>
			<p:column headerText="Date des entrées et des sorties">
            <h:outputText value="#{c.date}" />
            

        </p:column>

			<p:column headerText="Origine des entrées et désignation des sorties">
			<c:if test="${c.getClass().getSimpleName() eq  OpEntree}">					
					entree ${c.getClass().name}
				</c:if>
				<c:if test="${c.getClass().getSimpleName() eq  OpSortie}">
				
				sortie  ${c.getClass().name}
            	</c:if>
				





			</p:column>

			<p:column headerText="Désignation des matières et objets">

				<p:panel rendered="#{c['class'].simpleName eq 'OpEntree'}">


					<ui:repeat value="#{c.listMat}" var="mat">
					<h:outputText value=" #{mat.typematerieladd.designation} - 
					#{mat.design.marque.designation} - #{mat.design.renseignement}"/>
               
					</ui:repeat>

				</p:panel>

				<p:panel rendered="#{c['class'].simpleName eq 'OpSortie'}">
					<ui:repeat value="#{c.mat}" var="mat">
					<h:outputText value="#{mat.typematerieladd.designation} 
					- #{mat.design.marque.designation} - #{mat.design.renseignement}" />
                
					</ui:repeat>
				</p:panel>


			</p:column>

			<p:column headerText="Espèce des unités">
				<p:panel rendered="#{c['class'].simpleName eq 'OpEntree'}">
					<ui:repeat value="#{c.listMat}" var="mat">
					<h:outputText value="#{mat.design.especeUnite}" />
                <br></br>

					</ui:repeat>
				</p:panel>
				<p:panel rendered="#{c['class'].simpleName eq 'OpSortie'}">
				<h:outputText value="#{c.mat.design.especeUnite}" />
                <br></br>
				</p:panel>




			</p:column>

			<p:column headerText="Prix de l'unité">

				<p:panel rendered="#{c['class'].simpleName eq 'OpEntree'}">

					<ui:repeat value="#{c.listMat}" var="mat">

						<p:panel rendered="#{mat['class'].simpleName eq 'MaterielEx'}">
                    <h:outputText value="#{mat.design.pu}" />
                    
                    </p:panel>

						<p:panel rendered="#{mat['class'].simpleName eq 'MaterielNouv'}">
                    <h:outputText value="#{mat.design.pu}" />
                    
                    </p:panel>

					</ui:repeat>


				</p:panel>
				<p:panel rendered="#{c['class'].simpleName eq 'OpSortie'}">
        			<p:panel rendered="#{c.mat['class'].simpleName eq 'MaterielEx'}">
        			<h:outputText value="#{c.mat.design.pu}" />
                    
                    </p:panel>

						<p:panel rendered="#{c.mat['class'].simpleName eq 'MaterielNouv'}">
						<h:outputText value="#{c.mat.design.pu}" />
                    
                    </p:panel>
        		</p:panel>






			</p:column>

			<p:column headerText="Quanitité">
				<p:panel rendered="#{c['class'].simpleName eq 'OpEntree'}">
					<ui:repeat value="#{c.listMat}" var="mat">
                1<br></br>

					</ui:repeat>
				</p:panel>
			</p:column>

			<p:column headerText="Valeur">
				<p:panel rendered="#{c['class'].simpleName eq 'OpEntree'}">
					<ui:repeat value="#{c.listMat}" var="mat">
						<p:panel rendered="#{mat['class'].simpleName eq 'MaterielEx'}">
						<h:outputText value="#{1*mat.design.pu}" />
                    
                    </p:panel>

						<p:panel rendered="#{mat['class'].simpleName eq 'MaterielNouv'}">
						<h:outputText value="#{1*mat.design.pu}" />
                    
                    </p:panel>


					</ui:repeat>
				</p:panel>
			</p:column>
			<p:column headerText="Quanitité">
				<p:panel rendered="#{c['class'].simpleName eq 'OpSortie'}">
        			<h:outputText value="1" />
        		</p:panel>

			</p:column>

			<p:column headerText="Valeur">
				
				<p:panel rendered="#{c['class'].simpleName eq 'OpSortie'}">
        			<p:panel rendered="#{c.mat['class'].simpleName eq 'MaterielEx'}">
        			<h:outputText value="#{1*c.mat.design.pu}" />
                    
                    </p:panel>

						<p:panel rendered="#{c.mat['class'].simpleName eq 'MaterielNouv'}">
						<h:outputText value="#{1*c.mat.design.pu}" />
                    
                    </p:panel>
        		</p:panel>

			</p:column>
			


		</p:dataTable>


	</h:form>







</div>

</html>
