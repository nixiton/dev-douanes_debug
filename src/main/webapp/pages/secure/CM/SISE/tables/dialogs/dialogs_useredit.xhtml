<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:p="http://primefaces.org/ui" xmlns:c="http://java.sun.com/jsp/jstl/core"
>

    <p:dialog id="detail" widgetVar="detail" closable="false"
    			header   = "Modification Agent et Utilisateur" 
              position = "center"
              modal    = "true"
              
    >
        
            <div class="box dark col-md-12">

	<div class="body">
	<p:growl for="editagenterror" redisplay="false" id="messages" showDetail="true" autoUpdate="true" />
		<h:form id="ad">
		<p:message for="agentdir" id="messages" showDetail="true" autoUpdate="true" />
		<p:messages id="messagesmodify" showDetail="true" autoUpdate="true" />
		<div class="box dark col-md-6">
					<h:outputLabel for="name" styleClass="col-md-6"
						value="Nom et prénom : " />
					<p:inputText id="name" 
					styleClass="col-md-6" 
					value="#{editAgent.nomAgent}"
					required="true"
				    requiredMessage = "Nom Obligatoire"
						/>
					<hr></hr>


					<h:outputLabel for="im" styleClass="col-md-6"
						value="Imatriculation : " />
					<h:outputText id="im" styleClass="col-md-6" value="#{editAgent.im}"
						required="true">
					</h:outputText>

					<hr></hr>			
					<!-- User role with liste-->
					<h:outputLabel styleClass="col-md-6" 
						value="Fonction " />

					<p:selectOneMenu value="#{editAgent.roleAgent}" converter="#{useriConverter}" panelStyle="width:180px"  style="width:160px"
                         effect="fade" var="t" filter="true" filterMatchMode="startsWith">
                        <f:selectItem itemValue="#{null}" itemLabel="--select--" /> 
                            <f:selectItems value="#{siseBean.listUseri}" var="theme" itemLabel="#{theme.designation}" itemValue="#{theme}" />
                        <p:column>
                            <h:outputText value="#{t.designation}" />
                        </p:column>

                    </p:selectOneMenu>

                    <hr></hr>

			</div>
			<div class="box dark col-md-6">
					<!-- DIRECTION -->
					<h:outputLabel styleClass="col-md-6" 
						value="Direction " />

					<p:selectOneMenu id="agentdir" value="#{editAgent.direction}" converter="#{refConverter}" panelStyle="width:180px"  style="width:160px"
                         effect="fade" var="t" filter="true" filterMatchMode="startsWith">
                        <f:selectItem itemValue="#{null}" itemLabel="--select--" /> 
                            <f:selectItems value="#{siseBean.listDirection}" var="theme" itemLabel="#{theme.designation}" itemValue="#{theme}" />
                        <p:column>
                            <h:outputText value="#{t.designation}" />
                        </p:column>

                    </p:selectOneMenu>

                    <hr></hr>
                    <!-- POSTE -->
					<h:outputLabel styleClass="col-md-6" 
						value="Poste " />

					<p:selectOneMenu value="#{editAgent.posteny}" converter="#{refConverter}" panelStyle="width:180px"  style="width:160px"
                         effect="fade" var="t" filter="true" filterMatchMode="startsWith">
                        <f:selectItem itemValue="#{null}" itemLabel="--select--" /> 
                            <f:selectItems value="#{siseBean.listPoste}" var="theme" itemLabel="#{theme.designation}" itemValue="#{theme}" />
                        <p:column>
                            <h:outputText value="#{t.designation}" />
                        </p:column>

                    </p:selectOneMenu>

                    <hr></hr>
                    </div>
                    
                    <div class="box dark col-md-12">
                    <div class="box dark col-md-4"></div>
					<div class="box dark col-md-4">
					<!-- h:commandButton id="addUser"
						value="Mettre à jour" class="btn btn-lg btn-primary btn-block" 
						actionListener = "#{userMB.updateAgent(editAgent)}"
                   		 oncomplete  = "if (!args.validationFailed) PF('detail').hide();"
                   		 process = "@([id$=ad])"  
						/-->
				   <p:commandButton id="addUser" value="Mettre à jour"
				   
				   styleClass="btn btn-lg btn-primary btn-block"
				   actionListener="#{userMB.updateAgent(editAgent)}"
   					oncomplete="if (!args.validationFailed) PF('detail').hide();" 
   					update="@([id$=ad], [id$=tableUserMat])"/>
					</div>
					</div>
					<div class="box dark col-md-12">
                    <div class="box dark col-md-4"></div>
					<div class="box dark col-md-4">
					<h:commandButton id="cancelUser" action="#{userMB.exit()}"
						value="Cancel" class="btn btn-lg btn-primary btn-block"
						update="@([id$=ad], [id$=tableUserMat])"
						/>
					</div>
					</div>

				</h:form>
	</div>

</div>
        
    </p:dialog>

</html>
